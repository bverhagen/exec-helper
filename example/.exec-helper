commands:
    - build
    - clean
    - rebuild
    - analyze

build:
    - scons

clean:
    - scons

rebuild:
    - clean
    - build

analyze:
    - cppcheck
    - clang-static-analyzer

default-compilers:
    - gcc
    - clang

default-modes:
    - debug
    - release

scons:
    patterns:
        - COMPILER
        - MODE
    build-dir: build/{COMPILER}/{MODE}
    single-threaded: no
    command-line: compiler={COMPILER} mode={MODE}
    clean:
        command-line: 
            - --clean
            - compiler={COMPILER}
            - mode={MODE}

cppcheck:
    patterns:
        - TARGET
        - RUNTARGET
    src-dir: src
    target-path: "{TARGET}-{RUNTARGET}.cpp"
    command-line:
        - --std=c++11
        - --error-exitcode=1
    enable-checks:
        - all

clang-static-analyzer:
    build-command: build
    clean-command: clean
    compiler: envcc
    build-dir: build/clang-static-analyzer
