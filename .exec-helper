commands:
    - build
    - clean
    - rebuild
    - analyze

build:
    - scons

clean:
    - scons

rebuild:
    - clean
    - build

analyze:
    - cppcheck
    - clang-static-analyzer

default-compilers:
    - gcc
    - clang

default-modes:
    - debug
    - release

default-targets:
    - all

default-run-targets:
    - ""

scons:
    patterns:
        - COMPILER
        - MODE
    single-threaded: no
    build:
        command-line: 
            - compiler={COMPILER}
            - mode={MODE}
            - verbose=no
    clean:
        command-line:
            - --clean
            - compiler={COMPILER}
            - mode={MODE}
    target: "{TARGET}-{RUNTARGET}"

cppcheck:
    patterns:
        - TARGET
        - RUNTARGET
    src-dir: src
    target-path: "{TARGET}{RUNTARGET}.cpp"
    command-line:
        - --std=c++11
        - --error-exitcode=1
    enable-checks:
        - all

clang-static-analyzer:
    build-command: build
    clean-command: clean
    compiler: envcc
