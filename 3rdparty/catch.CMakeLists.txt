option(USE_SYSTEM_CATCH "Use the catch library provided by the system" ON)

if(${USE_SYSTEM_CATCH})
    find_package(catch REQUIRED)

    set(CATCH_INCLUDE_DIRS ${catch_INCLUDE_DIRS} CACHE INTERNAL CATCH_INCLUDE_DIRS)
    set(CATCH_LIBRARIES ${catch_LIBRARIES} CACHE INTERNAL CATCH_LIBRARIES)
    set(CATCH_LIBRARY_DIRS ${catch_LIBRARY_DIRS} CACHE INTERNAL CATCH_LIBRARY_DIRS)

else(${USE_SYSTEM_CATCH})
    include(ExternalProject)

    set(CATCH_INSTALL_DIR ${LIB_DIRECTORY}/catch)

    ExternalProject_Add(Catch
        PREFIX catch
        GIT_REPOSITORY https://github.com/philsquared/Catch.git
        CONFIGURE_COMMAND ""
        BUILD_COMMAND ""
        INSTALL_COMMAND ""
        UPDATE_COMMAND ""
        )

    set(CATCH_INCLUDE_DIRS ${CMAKE_CURRENT_BINARY_DIR}/catch/src/Catch/single_include/ CACHE INTERNAL CATCH_INCLUDE_DIRS)

endif(${USE_SYSTEM_CATCH})
