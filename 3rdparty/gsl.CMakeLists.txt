option(USE_SYSTEM_GSL "Use the gsl library provided by the system" OFF)

if(${USE_SYSTEM_GSL})
    find_package(Gsl REQUIRED)
else()
    include(ExternalProject)

    ExternalProject_Add(Gsl
        PREFIX gsl
        GIT_REPOSITORY https://github.com/Microsoft/GSL.git
        CONFIGURE_COMMAND ""
        BUILD_COMMAND ""
        INSTALL_COMMAND ""
        UPDATE_COMMAND ""
        )

    set(Gsl_INCLUDE_DIRS ${CMAKE_CURRENT_BINARY_DIR}/gsl/src/Gsl/include)

endif()

add_library(gsl INTERFACE)
target_include_directories(gsl INTERFACE ${Gsl_INCLUDE_DIRS})

if(NOT ${USE_SYSTEM_GSL})
    add_dependencies(gsl Gsl)
endif()
